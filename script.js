const cryptoData = [{"id":"bitcoin","symbol":"btc","name":"Bitcoin","image":"https://coin-images.coingecko.com/coins/images/1/large/bitcoin.png?1696501400","current_price":103733,"market_cap":2068603703898,"market_cap_rank":1,"fully_diluted_valuation":2068605985468,"total_volume":51428953917,"high_24h":103778,"low_24h":101490,"price_change_24h":2207.22,"price_change_percentage_24h":2.17405,"market_cap_change_24h":43590251036,"market_cap_change_percentage_24h":2.15259,"circulating_supply":19946478.0,"total_supply":19946500.0,"max_supply":21000000.0,"ath":126080,"ath_change_percentage":-17.74588,"ath_date":"2025-10-06T18:57:42.558Z","atl":67.81,"atl_change_percentage":152838.25585,"atl_date":"2013-07-06T00:00:00.000Z","roi":null,"last_updated":"2025-11-09T15:43:22.545Z"},{"id":"ethereum","symbol":"eth","name":"Ethereum","image":"https://coin-images.coingecko.com/coins/images/279/large/ethereum.png?1696501628","current_price":3532.91,"market_cap":426363458057,"market_cap_rank":2,"fully_diluted_valuation":426363458057,"total_volume":22598001574,"high_24h":3549.19,"low_24h":3360.28,"price_change_24h":153.09,"price_change_percentage_24h":4.52938,"market_cap_change_24h":19019209998,"market_cap_change_percentage_24h":4.66908,"circulating_supply":120696609.8489534,"total_supply":120696609.8489534,"max_supply":null,"ath":4946.05,"ath_change_percentage":-28.61044,"ath_date":"2025-08-24T19:21:03.333Z","atl":0.432979,"atl_change_percentage":815404.49702,"atl_date":"2015-10-20T00:00:00.000Z","roi":{"times":44.51608600453716,"currency":"btc","percentage":4451.608600453716},"last_updated":"2025-11-09T15:43:23.102Z"},{"id":"tether","symbol":"usdt","name":"Tether","image":"https://coin-images.coingecko.com/coins/images/325/large/Tether.png?1696501661","current_price":0.99985,"market_cap":183453590796,"market_cap_rank":3,"fully_diluted_valuation":183453590796,"total_volume":69459690389,"high_24h":1.0,"low_24h":0.999706,"price_change_24h":0.00014356,"price_change_percentage_24h":0.01436,"market_cap_change_24h":60567777,"market_cap_change_percentage_24h":0.03303,"circulating_supply":183470378260.1311,"total_supply":183470378260.1311,"max_supply":null,"ath":1.32,"ath_change_percentage":-24.42703,"ath_date":"2018-07-24T00:00:00.000Z","atl":0.572521,"atl_change_percentage":74.64903,"atl_date":"2015-03-02T00:00:00.000Z","roi":null,"last_updated":"2025-11-09T15:43:19.763Z"},{"id":"ripple","symbol":"xrp","name":"XRP","image":"https://coin-images.coingecko.com/coins/images/44/large/xrp-symbol-white-128.png?1696501442","current_price":2.31,"market_cap":139065504577,"market_cap_rank":4,"fully_diluted_valuation":231329562947,"total_volume":2523164454,"high_24h":2.32,"low_24h":2.25,"price_change_24h":0.065055,"price_change_percentage_24h":2.8924,"market_cap_change_24h":3751021549,"market_cap_change_percentage_24h":2.77208,"circulating_supply":60107199237.0,"total_supply":99985774127.0,"max_supply":100000000000.0,"ath":3.65,"ath_change_percentage":-36.5725,"ath_date":"2025-07-18T03:40:53.808Z","atl":0.00268621,"atl_change_percentage":85999.34221,"atl_date":"2014-05-22T00:00:00.000Z","roi":null,"last_updated":"2025-11-09T15:43:29.589Z"},{"id":"binancecoin","symbol":"bnb","name":"BNB","image":"https://coin-images.coingecko.com/coins/images/825/large/bnb-icon2_2x.png?1696501970","current_price":996.64,"market_cap":137270433417,"market_cap_rank":5,"fully_diluted_valuation":137270432570,"total_volume":1641915524,"high_24h":1004.48,"low_24h":977.48,"price_change_24h":7.37,"price_change_percentage_24h":0.74545,"market_cap_change_24h":983353078,"market_cap_change_percentage_24h":0.72153,"circulating_supply":137737330.68,"total_supply":137737329.8299999,"max_supply":200000000.0,"ath":1369.99,"ath_change_percentage":-27.25975,"ath_date":"2025-10-13T08:41:24.131Z","atl":0.0398177,"atl_change_percentage":2502644.75028,"atl_date":"2017-10-19T00:00:00.000Z","roi":null,"last_updated":"2025-11-09T15:43:21.455Z"},{"id":"solana","symbol":"sol","name":"Solana","image":"https://coin-images.coingecko.com/coins/images/4128/large/solana.png?1718769756","current_price":163.4,"market_cap":90280588205,"market_cap_rank":6,"fully_diluted_valuation":100080514486,"total_volume":3930834114,"high_24h":163.18,"low_24h":155.51,"price_change_24h":7.22,"price_change_percentage_24h":4.62218,"market_cap_change_24h":3708423717,"market_cap_change_percentage_24h":4.28362,"circulating_supply":553591792.6169313,"total_supply":613683988.1245475,"max_supply":null,"ath":293.31,"ath_change_percentage":-44.34458,"ath_date":"2025-01-19T11:15:27.957Z","atl":0.500801,"atl_change_percentage":32496.56512,"atl_date":"2020-05-11T19:35:23.449Z","roi":null,"last_updated":"2025-11-09T15:43:19.862Z"},{"id":"usd-coin","symbol":"usdc","name":"USDC","image":"https://coin-images.coingecko.com/coins/images/6319/large/usdc.png?1696506694","current_price":0.99979,"market_cap":75674925150,"market_cap_rank":7,"fully_diluted_valuation":75679054914,"total_volume":5250140600,"high_24h":0.999821,"low_24h":0.999681,"price_change_24h":1.669e-05,"price_change_percentage_24h":0.00167,"market_cap_change_24h":-51736374.34866333,"market_cap_change_percentage_24h":-0.06832,"circulating_supply":75690820225.53241,"total_supply":75694950856.61101,"max_supply":null,"ath":1.17,"ath_change_percentage":-14.74502,"ath_date":"2019-05-08T00:40:28.300Z","atl":0.877647,"atl_change_percentage":13.91719,"atl_date":"2023-03-11T08:02:13.981Z","roi":null,"last_updated":"2025-11-09T15:43:20.385Z"},{"id":"staked-ether","symbol":"steth","name":"Lido Staked Ether","image":"https://coin-images.coingecko.com/coins/images/13442/large/steth_logo.png?1696513206","current_price":3528.69,"market_cap":30440379120,"market_cap_rank":8,"fully_diluted_valuation":30440379120,"total_volume":38072928,"high_24h":3549.01,"low_24h":3357.92,"price_change_24h":157.87,"price_change_percentage_24h":4.68353,"market_cap_change_24h":1256955612,"market_cap_change_percentage_24h":4.30709,"circulating_supply":8630525.181258405,"total_supply":8630525.181258405,"max_supply":null,"ath":4932.89,"ath_change_percentage":-28.47863,"ath_date":"2025-08-24T19:21:31.902Z","atl":482.9,"atl_change_percentage":630.60693,"atl_date":"2020-12-22T04:08:21.854Z","roi":null,"last_updated":"2025-11-09T15:43:18.294Z"},{"id":"tron","symbol":"trx","name":"TRON","image":"https://coin-images.coingecko.com/coins/images/1094/large/tron-logo.png?1696502193","current_price":0.291729,"market_cap":27617111977,"market_cap_rank":9,"fully_diluted_valuation":27617568591,"total_volume":375047433,"high_24h":0.291763,"low_24h":0.288904,"price_change_24h":0.00111962,"price_change_percentage_24h":0.38527,"market_cap_change_24h":101299018,"market_cap_change_percentage_24h":0.36815,"circulating_supply":94666859826.17941,"total_supply":94668425021.75562,"max_supply":null,"ath":0.431288,"ath_change_percentage":-32.36064,"ath_date":"2024-12-04T00:10:40.323Z","atl":0.00180434,"atl_change_percentage":16067.70876,"atl_date":"2017-11-12T00:00:00.000Z","roi":{"times":152.54175023018212,"currency":"usd","percentage":15254.17502301821},"last_updated":"2025-11-09T15:43:19.893Z"},{"id":"dogecoin","symbol":"doge","name":"Dogecoin","image":"https://coin-images.coingecko.com/coins/images/5/large/dogecoin.png?1696501409","current_price":0.17892,"market_cap":27136271959,"market_cap_rank":10,"fully_diluted_valuation":27141408509,"total_volume":1437669253,"high_24h":0.179002,"low_24h":0.171623,"price_change_24h":0.00539345,"price_change_percentage_24h":3.10814,"market_cap_change_24h":815096473,"market_cap_change_percentage_24h":3.09673,"circulating_supply":151674246383.7052,"total_supply":151702956383.7052,"max_supply":null,"ath":0.731578,"ath_change_percentage":-75.54558,"ath_date":"2021-05-08T05:08:23.458Z","atl":8.69e-05,"atl_change_percentage":205763.54343,"atl_date":"2015-05-06T00:00:00.000Z","roi":null,"last_updated":"2025-11-09T15:43:24.010Z"}];

let displayedData = [...cryptoData];

// Format numbers
function formatNumber(num) {
    return new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD',
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
    }).format(num);
}

function formatLargeNumber(num) {
    return new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD',
        notation: 'compact',
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
    }).format(num);
}

// Render crypto list
function renderCryptoList(data) {
    const cryptoList = document.getElementById('cryptoList');
    cryptoList.innerHTML = '';

    data.forEach(crypto => {
        const cryptoItem = document.createElement('div');
        cryptoItem.className = 'crypto-item';

        const changeClass = crypto.price_change_percentage_24h >= 0 ? 'positive' : 'negative';
        const changeSign = crypto.price_change_percentage_24h >= 0 ? '' : '';

        cryptoItem.innerHTML = `
            <img src="${crypto.image}" alt="${crypto.name}" class="crypto-icon">
            <div>
                <div class="crypto-name">${crypto.name}</div>
            </div>
            <div class="crypto-symbol">${crypto.symbol.toUpperCase()}</div>
            <div class="crypto-price">${formatNumber(crypto.current_price)}</div>
            <div class="crypto-volume">${formatLargeNumber(crypto.total_volume)}</div>
            <div class="crypto-change ${changeClass}">${changeSign}${Math.abs(crypto.price_change_percentage_24h).toFixed(2)}%</div>
            <div class="crypto-mkt-cap">Mkt Cap : ${formatLargeNumber(crypto.market_cap)}</div>
        `;

        cryptoList.appendChild(cryptoItem);
    });
}

// Search functionality
document.getElementById('searchInput').addEventListener('input', (e) => {
    const searchTerm = e.target.value.toLowerCase();
    displayedData = cryptoData.filter(crypto => 
        crypto.name.toLowerCase().includes(searchTerm) || 
        crypto.symbol.toLowerCase().includes(searchTerm)
    );
    renderCryptoList(displayedData);
});

// Sort by market cap
document.getElementById('sortByMktCap').addEventListener('click', () => {
    displayedData.sort((a, b) => b.market_cap - a.market_cap);
    renderCryptoList(displayedData);
});

// Sort by percentage change
document.getElementById('sortByPercentage').addEventListener('click', () => {
    displayedData.sort((a, b) => b.price_change_percentage_24h - a.price_change_percentage_24h);
    renderCryptoList(displayedData);
});

// Initial render
renderCryptoList(displayedData);